import{j as le}from"./index-BXEk6jaj.js";/* empty css                   *//* empty css                 */import{_ as ne}from"./el-button-CJSPZsu0.js";/* empty css                     */import{V as M,v as oe,r as _,x as re,S as se,M as e,u as l,J as de,K as a,k as ue,B as p,a2 as m,ae as ie,P as pe,ac as B,y as F}from"./vue-BZjjLoal.js";import{A as I,_ as me,B as ce,o as ge,$ as Y,r as fe,a0 as _e,a1 as H,W as be,C as ve,a2 as ye,t as Ve,V as he,a3 as Ce,a4 as we,a5 as Ee,a6 as De,a7 as Pe,a8 as ke,a9 as xe,aa as ze,ab as Ne}from"./element-D35E9C9I.js";import"./vxe-C97jWTcD.js";function Se(E){return le({url:"tables",method:"get",params:E})}const Te={total:0,currentPage:1,pageSizes:[10,20,50],pageSize:10,layout:"total, sizes, prev, pager, next, jumper"};function Ae(E={}){const g=M({...Te,...E});return{paginationData:g,handleCurrentChange:V=>{g.currentPage=V},handleSizeChange:V=>{g.pageSize=V}}}const Ue={class:"app-container"},qe={class:"flex justify-between"},Re={class:"table-wrapper"},$e={class:"pager-wrapper"},Be={class:"my-3"},Fe=oe({name:"ElementPlus",__name:"index",setup(E){const g=_(!1),{paginationData:u,handleCurrentChange:S,handleSizeChange:V}=Ae(),T={id:void 0,no:"",date:"",address:"",tel:"",attn:""},y=_(!1),A=_(null),s=_(I(T)),K={date:[{required:!0,trigger:"blur",message:"Please select a date"}],address:[{required:!0,trigger:"blur",message:"Please select the address"}],tel:[{required:!0,trigger:"blur",message:"Please enter the tel"}],attn:[{required:!0,trigger:"blur",message:"Please enter the attn"}],to:[{required:!0,trigger:"blur",message:"Please enter the to name"}]};function Q(){var o;(o=A.value)==null||o.clearValidate(),s.value=I(T)}const k=_([{id:1,no:"RB-000001",date:"2023-01-01",to:"张三",address:"广东省深圳市南山区",attn:"已交付完結",tel:"13800000000"},{id:2,no:"RB-000002",date:"2023-01-02",to:"张三",address:"广东省深圳市南山区",attn:"已交付完結",tel:"13800000000"},{id:3,no:"RB-000003",date:"2023-01-03",to:"张三",address:"广东省深圳市南山区",attn:"已交付完結",tel:"13800000000"}]),D=_([]),x=_([]),U=_(null),h=M({username:"",phone:""});function j(){g.value=!0,Se({currentPage:u.currentPage,size:u.pageSize,username:h.username,phone:h.phone}).then(({data:o})=>{u.total=o.total}).catch(()=>{k.value=[]}).finally(()=>{g.value=!1})}function q(){u.currentPage===1?j():u.currentPage=1}function L(){var o;(o=U.value)==null||o.resetFields(),q()}const O=()=>{D.value.push({index:D.value.length,desc:"",qty:1,price:"",amount:""})},G=()=>{k.value.push(s.value),y.value=!1},J=o=>{x.value=o},W=()=>{x.value.forEach(o=>{D.value.splice(o.index,1)})},R=o=>{o.amount=o.qty*o.unit||0},X=o=>{const{columns:t,data:d}=o,i=[];return t.forEach((c,b)=>{if(b===0){i[b]=B("div",{style:{textDecoration:"underline"}},["Total"]);return}if(b!==4)return"";const P=d.map(f=>Number(f[c.property]));if(P.every(f=>Number.isNaN(f)))i[b]="N/A";else{const f=`$ ${P.reduce((r,C)=>{const z=Number(C);return Number.isNaN(z)?r:r+C},0)}`;i[b]=B("div",{class:"text-yellow-500 font-bold"},[f])}}),i};return(o,t)=>{const d=fe,i=ve,c=be,b=ie("SvgIcon"),P=Ve,f=he,r=Ce,C=De,z=Pe,Z=ge,w=xe,ee=ze,N=ke,$=Ne,te=ce,ae=me;return F(),re("div",Ue,[se((F(),de(Z,{shadow:"never"},{default:a(()=>[p("div",qe,[p("div",null,[e(d,{type:"primary",icon:l(Y),onClick:t[0]||(t[0]=n=>y.value=!0)},{default:a(()=>t[9]||(t[9]=[m(" New ")])),_:1},8,["icon"]),e(d,{link:"",plain:"",icon:l(_e)},{default:a(()=>t[10]||(t[10]=[m(" Export ")])),_:1},8,["icon"]),e(d,{link:"",type:"danger",icon:l(H)},{default:a(()=>t[11]||(t[11]=[m(" Delete ")])),_:1},8,["icon"])]),t[12]||(t[12]=p("div",null,null,-1)),p("div",null,[e(f,{ref_key:"searchFormRef",ref:U,inline:!0,model:l(h)},{default:a(()=>[e(c,{prop:"username",label:"No"},{default:a(()=>[e(i,{modelValue:l(h).username,"onUpdate:modelValue":t[1]||(t[1]=n=>l(h).username=n),placeholder:"Please Enter Keyword"},{suffix:a(()=>[e(d,{type:"primary",link:"",icon:l(ye),onClick:q},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(P,{content:"Refresh"},{default:a(()=>[e(b,{name:"refresh",class:"svg-icon text-lg cursor-pointer select-none",onClick:L})]),_:1})]),_:1})]),_:1},8,["model"])])]),p("div",Re,[e(C,{data:l(k),stripe:"","highlight-current-row":"","header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[e(r,{type:"selection",width:"50",align:"center"}),e(r,{prop:"no",label:"No",align:"center"}),e(r,{prop:"date",label:"Date",align:"center"}),e(r,{prop:"to",label:"To",align:"center"}),e(r,{prop:"address",label:"Address",align:"center"}),e(r,{prop:"attn",label:"Attn",align:"center"}),e(r,{prop:"tel",label:"Tel",align:"center"}),e(r,{fixed:"right",label:"操作",width:"150",align:"center"},{default:a(n=>[e(d,{link:"",plain:"",icon:l(we),type:"warning"},{default:a(()=>t[13]||(t[13]=[m(" Edit ")])),_:1},8,["icon"]),e(d,{link:"",plain:"",icon:l(Ee),type:"primary"},{default:a(()=>t[14]||(t[14]=[m(" View ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["data"])]),p("div",$e,[e(z,{background:"",layout:l(u).layout,"page-sizes":l(u).pageSizes,total:l(u).total,"page-size":l(u).pageSize,"current-page":l(u).currentPage,onSizeChange:l(V),onCurrentChange:l(S)},null,8,["layout","page-sizes","total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1})),[[ae,l(g)]]),e(te,{modelValue:l(y),"onUpdate:modelValue":t[8]||(t[8]=n=>ue(y)?y.value=n:null),title:l(s).id===void 0?"New":"Edit",width:"60%",onClosed:Q},{footer:a(()=>[e(d,{onClick:t[7]||(t[7]=n=>y.value=!1)},{default:a(()=>t[18]||(t[18]=[m(" Cancel ")])),_:1}),e(d,{type:"primary",loading:l(g),onClick:G},{default:a(()=>t[19]||(t[19]=[m(" Submit ")])),_:1},8,["loading"])]),default:a(()=>[t[20]||(t[20]=p("span",{class:"font-bold text-xl"},"Quote information",-1)),e(f,{ref_key:"formRef",ref:A,model:l(s),rules:K,"label-position":"top"},{default:a(()=>[e(N,{gutter:20},{default:a(()=>[e(w,{span:12},{default:a(()=>[e(c,{prop:"to",label:"To Name"},{default:a(()=>[e(i,{modelValue:l(s).to,"onUpdate:modelValue":t[2]||(t[2]=n=>l(s).to=n),placeholder:"Please Enter",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{span:12},{default:a(()=>[e(c,{prop:"date",label:"Invoice Date"},{default:a(()=>[e(ee,{modelValue:l(s).date,"onUpdate:modelValue":t[3]||(t[3]=n=>l(s).date=n),type:"date",format:"YYYY/MM/DD",placeholder:"Pick a day","value-format":"YYYY-MM-DD",class:"w-full",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,{gutter:20},{default:a(()=>[e(w,{span:12},{default:a(()=>[e(c,{prop:"address",label:"Address"},{default:a(()=>[e(i,{modelValue:l(s).address,"onUpdate:modelValue":t[4]||(t[4]=n=>l(s).address=n),placeholder:"Please Enter",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{span:12},{default:a(()=>[e(c,{prop:"tel",label:"Tel"},{default:a(()=>[e(i,{modelValue:l(s).tel,"onUpdate:modelValue":t[5]||(t[5]=n=>l(s).tel=n),placeholder:"Please Enter",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,{gutter:20},{default:a(()=>[e(w,{span:24},{default:a(()=>[e(c,{prop:"attn",label:"Attn"},{default:a(()=>[e(i,{modelValue:l(s).attn,"onUpdate:modelValue":t[6]||(t[6]=n=>l(s).attn=n),type:"textarea",placeholder:"Please Enter",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),t[21]||(t[21]=p("span",{class:"font-bold text-xl"},"Quote content",-1)),p("div",Be,[e(d,{type:"primary",icon:l(Y),onClick:O},{default:a(()=>t[15]||(t[15]=[m(" New ")])),_:1},8,["icon"]),e(d,{type:"danger",onClick:W,icon:l(H),disabled:l(x).length===0},{default:a(()=>t[16]||(t[16]=[m(" Delete ")])),_:1},8,["icon","disabled"])]),e(C,{"empty-text":"No Data","summary-method":X,"show-summary":"","sum-text":"Total",onSelectionChange:J,data:l(D),"highlight-current-row":"","header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[e(r,{type:"selection",width:"80",align:"center"}),e(r,{prop:"desc",label:"Description",align:"center"},{default:a(n=>[e(i,{modelValue:n.row.desc,"onUpdate:modelValue":v=>n.row.desc=v,type:"textarea",placeholder:"Please Enter",size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{prop:"qty",label:"Qty",width:"180",align:"center"},{default:a(n=>[e($,{"controls-position":"right",onChange:v=>R(n.row),modelValue:n.row.qty,"onUpdate:modelValue":v=>n.row.qty=v,min:1},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(r,{prop:"unit",label:"Unit Price(HK$)",width:"180",align:"center"},{default:a(n=>[e($,{"controls-position":"right",modelValue:n.row.unit,"onUpdate:modelValue":v=>n.row.unit=v,min:0,onChange:v=>R(n.row)},{prefix:a(()=>t[17]||(t[17]=[p("span",null,"HK$",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(r,{prop:"amount",label:"Amount (HK$)",width:"150",align:"center"},{default:a(({row:n})=>[m(" $ "+pe(n.amount||0),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}}),Oe=ne(Fe,[["__scopeId","data-v-47bd11f1"]]);export{Oe as default};
